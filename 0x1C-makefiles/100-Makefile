# Compiler
CC = gcc

# Compiler flags
CFLAGS = -Wall -Werror -Wextra -pedantic

# Emacs temporary files
ETMP = $(wildcard *~)

# Vim temporary files
VTMP = $(wildcard *.swp)

# Essential file
ESF := "$(wildcard m.h)"

# Sources
SRC = main.c school.c

# The executable
NAME = school

# makefile should not compile if the header file 'm.h' is missing

ifneq ($(strip $(ESF)), "")

all: $(SRC)
	$(CC) $? -o $(NAME)

$(OBJ): m.h

.PHONY: clean \
	oclean \
	fclean \
	re

clean: # delete all temporary files along with the executable
	$(RM) $(ETMP) $(VTMP) $(NAME)

oclean: # delete the object files
	$(RM) $(OBJ)

fclean: # delete all temporary files, executable and the object files
	$(RM) $(VTMP) $(ETMP) $(NAME)
	$(RM) $(OBJ)

re: oclean all # force recompilation of all source files

endif
